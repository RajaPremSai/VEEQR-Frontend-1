import{r as d,j as e,L as q}from"./chunk-Cm16MDj1.js";import{a as j}from"./chunk-BrHt4W7n.js";function H(){const[u,I]=d.useState({totalUsers:0,totalVehicles:0,totalGates:0,todayLogs:0,activeVehicles:0,weeklyTrend:[],vehicleTypeDistribution:[],gateActivity:[],recentActivity:[]}),[c,f]=d.useState(!0),y=async()=>{try{const[i,p,g,a,n]=await Promise.all([j.get("/api/manager/users"),j.get("/api/manager/vehicles"),j.get("/api/manager/personal-vehicles"),j.get("/api/manager/gates"),j.get("/api/manager/logs")]),T=i.data.users||[],h=p.data.vehicles||[],N=g.data.vehicles||[],D=a.data.gates||[],S=n.data.logs||[],W=new Date().toDateString(),B=S.filter(v=>v.timeIn&&new Date(v.timeIn).toDateString()===W).length,k=[];for(let v=6;v>=0;v--){const s=new Date;s.setDate(s.getDate()-v);const t=S.filter(r=>r.timeIn&&new Date(r.timeIn).toDateString()===s.toDateString()).length;k.push({day:s.toLocaleDateString("en-US",{weekday:"short"}),count:t})}const L=[...h,...N],A={};L.forEach(v=>{const s=v.vehicleType||"Other";A[s]=(A[s]||0)+1});const G=Object.entries(A).map(([v,s])=>({type:v,count:s,percentage:Math.round(s/L.length*100)})),z=D.map(v=>{const s=S.filter(t=>t.gateNumber===v.gateNumber).length;return{gateName:v.gateName,gateNumber:v.gateNumber,activity:s}}),M=S.sort((v,s)=>new Date(s.timeIn||s.createdAt)-new Date(v.timeIn||v.createdAt)).slice(0,10);I({totalUsers:T.length,totalVehicles:L.length,totalGates:D.length,todayLogs:B,activeVehicles:S.filter(v=>v.timeIn&&!v.timeOut).length,weeklyTrend:k,vehicleTypeDistribution:G,gateActivity:z,recentActivity:M})}catch{}finally{f(!1)}};d.useEffect(()=>{y()},[]);const x=[{path:"/manager/users",label:"Manage Users",icon:"ðŸ‘¥",color:"var(--primary)"},{path:"/manager/vehicles",label:"University Vehicles",icon:"ðŸšŒ",color:"var(--accent)"},{path:"/manager/personal-vehicles",label:"Personal Vehicles",icon:"ðŸš—",color:"var(--secondary)"},{path:"/manager/gates",label:"Manage Gates",icon:"ðŸšª",color:"var(--warning)"},{path:"/manager/announcements",label:"Announcements",icon:"ðŸ“¢",color:"var(--error)"},{path:"/manager/guards",label:"Security Guards",icon:"ðŸ›¡ï¸",color:"var(--primary)"},{path:"/manager/logs",label:"View Logs",icon:"ðŸ“‹",color:"var(--accent)"}];return e.jsxs("div",{children:[e.jsxs("div",{className:"card",style:{background:"linear-gradient(135deg, var(--primary) 0%, #1a365d 100%)",color:"var(--white)",textAlign:"center",padding:"40px 24px"},children:[e.jsx("div",{style:{width:"80px",height:"80px",background:"rgba(255, 255, 255, 0.2)",borderRadius:"50%",margin:"0 auto 24px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"40px"},children:"ðŸ‘¨â€ðŸ’¼"}),e.jsx("h1",{style:{color:"var(--white)",marginBottom:"12px"},children:"Manager Dashboard"}),e.jsx("p",{style:{fontSize:"18px",opacity:.9,marginBottom:"0"},children:"Welcome to UniPass Management Console"}),e.jsx("p",{style:{fontSize:"14px",opacity:.7,marginTop:"8px"},children:"Manage users, vehicles, gates, and monitor campus access"})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{style:{marginBottom:"24px",textAlign:"center"},children:"Quick Actions"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"20px"},children:x.map((i,p)=>e.jsxs(q,{to:i.path,style:{display:"flex",alignItems:"center",gap:"16px",padding:"24px",background:"var(--white)",border:"2px solid #E2E8F0",borderRadius:"12px",textDecoration:"none",color:"var(--neutral-dark)",transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.05)"},onMouseEnter:g=>{g.target.style.transform="translateY(-4px)",g.target.style.boxShadow="0 8px 25px rgba(0, 0, 0, 0.1)",g.target.style.borderColor=i.color},onMouseLeave:g=>{g.target.style.transform="translateY(0)",g.target.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.05)",g.target.style.borderColor="#E2E8F0"},children:[e.jsx("div",{style:{width:"48px",height:"48px",background:i.color,borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px",color:"var(--white)"},children:i.icon}),e.jsxs("div",{children:[e.jsx("h4",{style:{margin:"0 0 4px 0",color:"var(--primary)",fontSize:"16px",fontWeight:"600"},children:i.label}),e.jsx("p",{style:{margin:"0",fontSize:"14px",color:"var(--secondary)",opacity:.8},children:"Click to access"})]})]},p))})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{style:{marginBottom:"24px",textAlign:"center"},children:"Key Performance Indicators"}),c?e.jsx("div",{style:{textAlign:"center",padding:"40px"},children:"Loading analytics..."}):e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"20px"},children:[e.jsxs("div",{style:{textAlign:"center",padding:"24px",background:"linear-gradient(135deg, #3B82F6 0%, #1E40AF 100%)",borderRadius:"12px",color:"white",boxShadow:"0 4px 12px rgba(59, 130, 246, 0.3)"},children:[e.jsx("div",{style:{fontSize:"32px",marginBottom:"8px"},children:"ðŸ‘¥"}),e.jsx("h4",{style:{margin:"0 0 8px 0",color:"white",opacity:.9},children:"Total Users"}),e.jsx("p",{style:{margin:"0",fontSize:"32px",fontWeight:"700",color:"white"},children:u.totalUsers}),e.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"12px",opacity:.8},children:"Registered in system"})]}),e.jsxs("div",{style:{textAlign:"center",padding:"24px",background:"linear-gradient(135deg, #10B981 0%, #047857 100%)",borderRadius:"12px",color:"white",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)"},children:[e.jsx("div",{style:{fontSize:"32px",marginBottom:"8px"},children:"ðŸš—"}),e.jsx("h4",{style:{margin:"0 0 8px 0",color:"white",opacity:.9},children:"Total Vehicles"}),e.jsx("p",{style:{margin:"0",fontSize:"32px",fontWeight:"700",color:"white"},children:u.totalVehicles}),e.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"12px",opacity:.8},children:"University + Personal"})]}),e.jsxs("div",{style:{textAlign:"center",padding:"24px",background:"linear-gradient(135deg, #F59E0B 0%, #D97706 100%)",borderRadius:"12px",color:"white",boxShadow:"0 4px 12px rgba(245, 158, 11, 0.3)"},children:[e.jsx("div",{style:{fontSize:"32px",marginBottom:"8px"},children:"ðŸšª"}),e.jsx("h4",{style:{margin:"0 0 8px 0",color:"white",opacity:.9},children:"Active Gates"}),e.jsx("p",{style:{margin:"0",fontSize:"32px",fontWeight:"700",color:"white"},children:u.totalGates}),e.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"12px",opacity:.8},children:"Monitoring access"})]}),e.jsxs("div",{style:{textAlign:"center",padding:"24px",background:"linear-gradient(135deg, #EF4444 0%, #DC2626 100%)",borderRadius:"12px",color:"white",boxShadow:"0 4px 12px rgba(239, 68, 68, 0.3)"},children:[e.jsx("div",{style:{fontSize:"32px",marginBottom:"8px"},children:"ðŸ“‹"}),e.jsx("h4",{style:{margin:"0 0 8px 0",color:"white",opacity:.9},children:"Today's Entries"}),e.jsx("p",{style:{margin:"0",fontSize:"32px",fontWeight:"700",color:"white"},children:u.todayLogs}),e.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"12px",opacity:.8},children:"Vehicle movements"})]}),e.jsxs("div",{style:{textAlign:"center",padding:"24px",background:"linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%)",borderRadius:"12px",color:"white",boxShadow:"0 4px 12px rgba(139, 92, 246, 0.3)"},children:[e.jsx("div",{style:{fontSize:"32px",marginBottom:"8px"},children:"ðŸ”„"}),e.jsx("h4",{style:{margin:"0 0 8px 0",color:"white",opacity:.9},children:"Currently Inside"}),e.jsx("p",{style:{margin:"0",fontSize:"32px",fontWeight:"700",color:"white"},children:u.activeVehicles}),e.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"12px",opacity:.8},children:"Vehicles on campus"})]})]})]}),!c&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"card",children:[e.jsx("h3",{style:{marginBottom:"24px"},children:"Weekly Activity Trend"}),e.jsx("div",{style:{display:"flex",alignItems:"end",justifyContent:"space-between",height:"200px",padding:"20px",background:"#f8fafc",borderRadius:"8px",gap:"8px"},children:u.weeklyTrend.map((i,p)=>{const g=Math.max(...u.weeklyTrend.map(n=>n.count)),a=g>0?i.count/g*150:0;return e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[e.jsx("div",{style:{width:"100%",maxWidth:"40px",height:`${a}px`,background:"linear-gradient(135deg, #3B82F6 0%, #1E40AF 100%)",borderRadius:"4px 4px 0 0",marginBottom:"8px",display:"flex",alignItems:"end",justifyContent:"center",color:"white",fontSize:"12px",fontWeight:"600",paddingBottom:"4px"},children:i.count>0&&i.count}),e.jsx("span",{style:{fontSize:"12px",fontWeight:"500"},children:i.day})]},p)})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[e.jsxs("div",{className:"card",children:[e.jsx("h3",{style:{marginBottom:"24px"},children:"Vehicle Type Distribution"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:u.vehicleTypeDistribution.map((i,p)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"50%",background:`hsl(${p*60}, 70%, 50%)`}}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[e.jsx("span",{style:{fontWeight:"500"},children:i.type}),e.jsxs("span",{style:{fontSize:"14px",color:"#6b7280"},children:[i.count," (",i.percentage,"%)"]})]}),e.jsx("div",{style:{width:"100%",height:"6px",background:"#e5e7eb",borderRadius:"3px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${i.percentage}%`,height:"100%",background:`hsl(${p*60}, 70%, 50%)`,borderRadius:"3px"}})})]})]},p))})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{style:{marginBottom:"24px"},children:"Gate Activity"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:u.gateActivity.map((i,p)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"600",color:"#1f2937"},children:i.gateName}),e.jsxs("div",{style:{fontSize:"12px",color:"#6b7280"},children:["Gate ",i.gateNumber]})]}),e.jsxs("div",{style:{background:i.activity>0?"#10b981":"#6b7280",color:"white",padding:"4px 12px",borderRadius:"12px",fontSize:"14px",fontWeight:"600"},children:[i.activity," logs"]})]},p))})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{style:{marginBottom:"24px"},children:"Recent Activity"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:u.recentActivity.length===0?e.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#6b7280"},children:"No recent activity"}):u.recentActivity.map((i,p)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",background:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:i.timeOut?"#10b981":"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"18px"},children:i.timeOut?"ðŸš—":"ðŸ”„"}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:"600",color:"#1f2937"},children:[i.vehicleNumber," - ",i.vehicleOwner||"Unknown"]}),e.jsxs("div",{style:{fontSize:"12px",color:"#6b7280"},children:["Gate ",i.gateNumber," â€¢"," ",i.timeOut?"Exited":"Entered"]})]})]}),e.jsx("div",{style:{textAlign:"right",fontSize:"12px",color:"#6b7280"},children:i.timeIn?new Date(i.timeIn).toLocaleString():"N/A"})]},p))})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{style:{marginBottom:"24px"},children:"Export Reports"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"16px"},children:[e.jsx("button",{className:"btn",onClick:()=>window.open("/manager/logs","_blank"),style:{display:"flex",alignItems:"center",gap:"8px",justifyContent:"center",padding:"16px"},children:"ðŸ“Š Detailed Logs Report"}),e.jsx("button",{className:"btn secondary",onClick:()=>{const i=u.recentActivity.map(n=>`${n.vehicleNumber},${n.vehicleOwner||""},${n.gateNumber},${n.timeIn||""}`).join(`
`),p=new Blob([`Vehicle Number,Owner,Gate,Time
${i}`],{type:"text/csv"}),g=URL.createObjectURL(p),a=document.createElement("a");a.href=g,a.download="dashboard-summary.csv",a.click(),URL.revokeObjectURL(g)},style:{display:"flex",alignItems:"center",gap:"8px",justifyContent:"center",padding:"16px"},children:"ðŸ“„ Export Summary CSV"})]})]})]})]})}function J(){const[u,I]=d.useState([]),[c,f]=d.useState([]),[y,x]=d.useState({firstName:"",lastName:"",empNumber:"",email:"",password:"StrongPass@123",contactNumber:"",userType:"Employee"}),[i,p]=d.useState(!1),[g,a]=d.useState(""),[n,T]=d.useState("All"),[h,N]=d.useState([]),[D,S]=d.useState(!1),[W,B]=d.useState(null),k=async()=>{p(!0);try{const{data:s}=await j.get("/api/manager/users");I(s.users||[]),f(s.users||[])}catch{}finally{p(!1)}};d.useEffect(()=>{k()},[]),d.useEffect(()=>{let s=u;n!=="All"&&(s=s.filter(t=>t.userType===n)),g&&(s=s.filter(t=>t.firstName.toLowerCase().includes(g.toLowerCase())||t.lastName.toLowerCase().includes(g.toLowerCase())||t.email.toLowerCase().includes(g.toLowerCase())||t.empNumber.toLowerCase().includes(g.toLowerCase()))),f(s)},[u,g,n]);const L=s=>{N(s?c.map(t=>t._id):[])},A=(s,t)=>{N(t?[...h,s]:h.filter(r=>r!==s))},G=()=>{B({type:"bulkDelete",message:`Are you sure you want to delete ${h.length} selected users?`,action:async()=>{try{await Promise.all(h.map(s=>j.delete(`/api/manager/users/${s}`))),N([]),await k()}catch{}}}),S(!0)},z=({show:s,onClose:t,action:r})=>s?e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e.jsxs("div",{style:{background:"white",padding:"24px",borderRadius:"12px",maxWidth:"400px",width:"90%",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.2)"},children:[e.jsx("h3",{style:{marginBottom:"16px"},children:"Confirm Action"}),e.jsx("p",{style:{marginBottom:"24px",color:"#6b7280"},children:r?.message}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[e.jsx("button",{className:"btn secondary",onClick:t,children:"Cancel"}),e.jsx("button",{className:"btn danger",onClick:()=>{r?.action(),t()},children:"Confirm"})]})]})}):null,M=async s=>{s.preventDefault(),p(!0);try{await j.post("/api/manager/users",y),x({firstName:"",lastName:"",empNumber:"",email:"",password:"StrongPass@123",contactNumber:"",userType:"Employee"}),await k()}catch{}finally{p(!1)}},v=async s=>{const t=u.find(r=>r._id===s);B({type:"delete",message:`Are you sure you want to delete ${t?.firstName} ${t?.lastName}?`,action:async()=>{try{await j.delete(`/api/manager/users/${s}`),await k()}catch{}}}),S(!0)};return e.jsxs("div",{children:[e.jsx(z,{show:D,onClose:()=>S(!1),action:W}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{style:{marginBottom:"24px",display:"flex",alignItems:"center",gap:"8px"},children:"ðŸ‘¤ Create New User"}),e.jsxs("form",{onSubmit:M,style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"First Name"}),e.jsx("input",{className:"input",value:y.firstName||"",onChange:s=>x(t=>({...t,firstName:s.target.value})),required:!0,style:{width:"100%"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"Last Name"}),e.jsx("input",{className:"input",value:y.lastName||"",onChange:s=>x(t=>({...t,lastName:s.target.value})),required:!0,style:{width:"100%"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"Employee Number"}),e.jsx("input",{className:"input",value:y.empNumber||"",onChange:s=>x(t=>({...t,empNumber:s.target.value})),required:!0,style:{width:"100%"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"Email"}),e.jsx("input",{type:"email",className:"input",value:y.email||"",onChange:s=>x(t=>({...t,email:s.target.value})),required:!0,style:{width:"100%"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"Password"}),e.jsx("input",{type:"password",className:"input",value:y.password||"",onChange:s=>x(t=>({...t,password:s.target.value})),required:!0,style:{width:"100%"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"Contact Number"}),e.jsx("input",{className:"input",value:y.contactNumber||"",onChange:s=>x(t=>({...t,contactNumber:s.target.value})),style:{width:"100%"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"User Type"}),e.jsxs("select",{className:"input",value:y.userType||"",onChange:s=>x(t=>({...t,userType:s.target.value})),style:{width:"100%"},children:[e.jsx("option",{value:"Employee",children:"Employee"}),e.jsx("option",{value:"Student",children:"Student"}),e.jsx("option",{value:"Visitor",children:"Visitor"})]})]}),e.jsx("div",{style:{display:"flex",alignItems:"end"},children:e.jsx("button",{className:"btn",disabled:i,style:{width:"100%",padding:"12px"},children:i?"Creating...":"Create User"})})]})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"center",flexWrap:"wrap"},children:[e.jsx("div",{style:{flex:1,minWidth:"200px"},children:e.jsx("input",{className:"input",placeholder:"ðŸ” Search users by name, email, or employee number...",value:g,onChange:s=>a(s.target.value),style:{width:"100%"}})}),e.jsx("div",{children:e.jsxs("select",{className:"input",value:n,onChange:s=>T(s.target.value),children:[e.jsx("option",{value:"All",children:"All Types"}),e.jsx("option",{value:"Employee",children:"Employee"}),e.jsx("option",{value:"Student",children:"Student"}),e.jsx("option",{value:"Visitor",children:"Visitor"})]})}),h.length>0&&e.jsxs("button",{className:"btn danger",onClick:G,style:{display:"flex",alignItems:"center",gap:"8px"},children:["ðŸ—‘ï¸ Delete Selected (",h.length,")"]})]})}),e.jsxs("div",{className:"card",children:[e.jsxs("h3",{style:{marginBottom:"24px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("span",{children:["ðŸ‘¥ Users Directory (",c.length,")"]}),c.length>0&&e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"14px"},children:[e.jsx("input",{type:"checkbox",checked:h.length===c.length,onChange:s=>L(s.target.checked)}),"Select All"]})]}),i?e.jsxs("div",{style:{textAlign:"center",padding:"40px"},children:[e.jsx("div",{style:{fontSize:"24px",marginBottom:"8px"},children:"â³"}),"Loading users..."]}):c.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#6b7280"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"ðŸ‘¤"}),e.jsx("h4",{children:"No users found"}),e.jsx("p",{children:"Try adjusting your search or filter criteria"})]}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:"20px"},children:c.map(s=>e.jsxs("div",{style:{border:"1px solid #e2e8f0",borderRadius:"12px",padding:"20px",background:"white",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.05)",transition:"all 0.2s ease",position:"relative"},onMouseEnter:t=>{t.target.style.transform="translateY(-2px)",t.target.style.boxShadow="0 8px 25px rgba(0, 0, 0, 0.1)"},onMouseLeave:t=>{t.target.style.transform="translateY(0)",t.target.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.05)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"start",justifyContent:"space-between",marginBottom:"16px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("input",{type:"checkbox",checked:h.includes(s._id),onChange:t=>A(s._id,t.target.checked)}),e.jsxs("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:`linear-gradient(135deg, ${s.userType==="Employee"?"#3B82F6":s.userType==="Student"?"#10B981":"#F59E0B"} 0%, ${s.userType==="Employee"?"#1E40AF":s.userType==="Student"?"#047857":"#D97706"} 100%)`,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"20px",fontWeight:"600"},children:[s.firstName.charAt(0),s.lastName.charAt(0)]})]}),e.jsx("div",{style:{background:s.userType==="Employee"?"#dbeafe":s.userType==="Student"?"#d1fae5":"#fef3c7",color:s.userType==="Employee"?"#1e40af":s.userType==="Student"?"#047857":"#d97706",padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:"600"},children:s.userType})]}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs("h4",{style:{margin:"0 0 4px 0",fontSize:"18px",fontWeight:"600"},children:[s.firstName," ",s.middleName?s.middleName+" ":"",s.lastName]}),e.jsxs("p",{style:{margin:"0",color:"#6b7280",fontSize:"14px"},children:["Employee #",s.empNumber]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginBottom:"16px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"14px"},children:[e.jsx("span",{children:"ðŸ“§"}),e.jsx("span",{style:{color:"#6b7280"},children:s.email})]}),s.contactNumber&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"14px"},children:[e.jsx("span",{children:"ðŸ“±"}),e.jsx("span",{style:{color:"#6b7280"},children:s.contactNumber})]}),s.createdAt&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"14px"},children:[e.jsx("span",{children:"ðŸ“…"}),e.jsxs("span",{style:{color:"#6b7280"},children:["Joined ",new Date(s.createdAt).toLocaleDateString()]})]})]}),e.jsx("div",{style:{display:"flex",gap:"8px"},children:e.jsx("button",{className:"btn danger",onClick:()=>v(s._id),style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",fontSize:"14px"},children:"ðŸ—‘ï¸ Delete"})})]},s._id))})]})]})}function K(){const[u,I]=d.useState([]),[c,f]=d.useState([]),[y,x]=d.useState({gateNumber:"",gateName:""}),[i,p]=d.useState(null),[g,a]=d.useState(!1),[n,T]=d.useState(""),[h,N]=d.useState([]),[D,S]=d.useState(!1),[W,B]=d.useState(null),[k,L]=d.useState(null),A=async()=>{a(!0);try{const{data:o}=await j.get("/api/manager/gates");I(o.gates||[]),f(o.gates||[])}catch{}finally{a(!1)}};d.useEffect(()=>{A()},[]),d.useEffect(()=>{let o=u;n&&(o=o.filter(C=>C.gateName.toLowerCase().includes(n.toLowerCase())||C.gateNumber.toLowerCase().includes(n.toLowerCase()))),f(o)},[u,n]);const G=o=>{N(o?c.map(C=>C._id):[])},z=(o,C)=>{N(C?[...h,o]:h.filter(w=>w!==o))},M=()=>{B({type:"bulkDelete",message:`Are you sure you want to delete ${h.length} selected gates?`,action:async()=>{try{await Promise.all(h.map(o=>j.delete(`/api/manager/gates/${o}`))),N([]),await A()}catch{}}}),S(!0)},v=o=>{p({...o})},s=()=>{p(null)},t=async()=>{if(i)try{await j.put(`/api/manager/gates/${i._id}`,{gateNumber:i.gateNumber,gateName:i.gateName}),p(null),await A()}catch{}},r=(o,C)=>{L(C),o.dataTransfer.effectAllowed="move"},E=o=>{o.preventDefault(),o.dataTransfer.dropEffect="move"},_=(o,C)=>{if(o.preventDefault(),!k||k._id===C._id)return;const w=c.findIndex(m=>m._id===k._id),U=c.findIndex(m=>m._id===C._id),l=[...c];l.splice(w,1),l.splice(U,0,k),f(l),L(null)},R=({show:o,onClose:C,action:w})=>o?e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e.jsxs("div",{style:{background:"white",padding:"24px",borderRadius:"12px",maxWidth:"400px",width:"90%",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.2)"},children:[e.jsx("h3",{style:{marginBottom:"16px"},children:"Confirm Action"}),e.jsx("p",{style:{marginBottom:"24px",color:"#6b7280"},children:w?.message}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[e.jsx("button",{className:"btn secondary",onClick:C,children:"Cancel"}),e.jsx("button",{className:"btn danger",onClick:()=>{w?.action(),C()},children:"Confirm"})]})]})}):null,V=async o=>{o.preventDefault(),a(!0);try{await j.post("/api/manager/gates",y),x({gateNumber:"",gateName:""}),await A()}catch{}finally{a(!1)}},F=async o=>{const C=u.find(w=>w._id===o);B({type:"delete",message:`Are you sure you want to delete gate "${C?.gateName}" (${C?.gateNumber})?`,action:async()=>{try{await j.delete(`/api/manager/gates/${o}`),await A()}catch{}}}),S(!0)};return e.jsxs("div",{children:[e.jsx(R,{show:D,onClose:()=>S(!1),action:W}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{style:{marginBottom:"24px",display:"flex",alignItems:"center",gap:"8px"},children:"ðŸšª Add New Gate"}),e.jsxs("form",{onSubmit:V,style:{display:"grid",gridTemplateColumns:"1fr 1fr auto",gap:"16px",alignItems:"end"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"Gate Number"}),e.jsx("input",{className:"input",value:y.gateNumber||"",onChange:o=>x(C=>({...C,gateNumber:o.target.value})),required:!0,placeholder:"e.g., G001",style:{width:"100%"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"Gate Name"}),e.jsx("input",{className:"input",value:y.gateName||"",onChange:o=>x(C=>({...C,gateName:o.target.value})),required:!0,placeholder:"e.g., Main Entrance",style:{width:"100%"}})]}),e.jsx("button",{className:"btn",disabled:g,style:{padding:"12px 24px"},children:g?"Saving...":"Add Gate"})]})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"center",flexWrap:"wrap"},children:[e.jsx("div",{style:{flex:1,minWidth:"200px"},children:e.jsx("input",{className:"input",placeholder:"ðŸ” Search gates by name or number...",value:n,onChange:o=>T(o.target.value),style:{width:"100%"}})}),h.length>0&&e.jsxs("button",{className:"btn danger",onClick:M,style:{display:"flex",alignItems:"center",gap:"8px"},children:["ðŸ—‘ï¸ Delete Selected (",h.length,")"]})]})}),e.jsxs("div",{className:"card",children:[e.jsxs("h3",{style:{marginBottom:"24px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("span",{children:["ðŸšª Gates Management (",c.length,")"]}),c.length>0&&e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"14px"},children:[e.jsx("input",{type:"checkbox",checked:h.length===c.length,onChange:o=>G(o.target.checked)}),"Select All"]})]}),g?e.jsxs("div",{style:{textAlign:"center",padding:"40px"},children:[e.jsx("div",{style:{fontSize:"24px",marginBottom:"8px"},children:"â³"}),"Loading gates..."]}):c.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#6b7280"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"ðŸšª"}),e.jsx("h4",{children:"No gates found"}),e.jsx("p",{children:"Try adjusting your search criteria or add a new gate"})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:c.map((o,C)=>e.jsx("div",{draggable:!0,onDragStart:w=>r(w,o),onDragOver:E,onDrop:w=>_(w,o),style:{border:"1px solid #e2e8f0",borderRadius:"12px",padding:"20px",background:"white",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.05)",transition:"all 0.2s ease",cursor:k?"grabbing":"grab",opacity:k&&k._id===o._id?.5:1},onMouseEnter:w=>{k||(w.currentTarget.style.transform="translateY(-2px)",w.currentTarget.style.boxShadow="0 8px 25px rgba(0, 0, 0, 0.1)")},onMouseLeave:w=>{k||(w.currentTarget.style.transform="translateY(0)",w.currentTarget.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.05)")},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx("input",{type:"checkbox",checked:h.includes(o._id),onChange:w=>z(o._id,w.target.checked)}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #F59E0B 0%, #D97706 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"20px",fontWeight:"600"},children:"ðŸšª"}),e.jsx("div",{children:i&&i._id===o._id?e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx("input",{className:"input",value:i.gateNumber,onChange:w=>p({...i,gateNumber:w.target.value}),placeholder:"Gate Number",style:{width:"150px"}}),e.jsx("input",{className:"input",value:i.gateName,onChange:w=>p({...i,gateName:w.target.value}),placeholder:"Gate Name",style:{width:"200px"}})]}):e.jsxs("div",{children:[e.jsx("h4",{style:{margin:"0 0 4px 0",fontSize:"18px",fontWeight:"600"},children:o.gateName}),e.jsxs("p",{style:{margin:"0",color:"#6b7280",fontSize:"14px"},children:["Gate #",o.gateNumber]})]})})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[o.createdAt&&e.jsxs("div",{style:{textAlign:"right",fontSize:"12px",color:"#6b7280"},children:[e.jsx("div",{children:"Created"}),e.jsx("div",{children:new Date(o.createdAt).toLocaleDateString()})]}),e.jsx("div",{style:{display:"flex",gap:"8px"},children:i&&i._id===o._id?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn secondary",onClick:s,style:{fontSize:"14px",padding:"8px 12px"},children:"Cancel"}),e.jsx("button",{className:"btn",onClick:t,style:{fontSize:"14px",padding:"8px 12px"},children:"Save"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn secondary",onClick:()=>v(o),style:{fontSize:"14px",padding:"8px 12px"},children:"âœï¸ Edit"}),e.jsx("button",{className:"btn danger",onClick:()=>F(o._id),style:{fontSize:"14px",padding:"8px 12px"},children:"ðŸ—‘ï¸ Delete"})]})})]})]})},o._id))}),c.length>1&&e.jsx("div",{style:{marginTop:"16px",padding:"12px",background:"#f8fafc",borderRadius:"8px",fontSize:"14px",color:"#6b7280",textAlign:"center"},children:"ðŸ’¡ Tip: Drag and drop gates to reorder them"})]})]})}function Q(){const[u,I]=d.useState([]),[c,f]=d.useState([]),[y,x]=d.useState({vehicleNumber:"",vehicleType:"Bus",vehicleModelName:"",driverName:"",driverMobileNumber:""}),[i,p]=d.useState(null),[g,a]=d.useState(!1),[n,T]=d.useState(""),[h,N]=d.useState("All"),[D,S]=d.useState([]),[W,B]=d.useState(!1),[k,L]=d.useState(null),[A,G]=d.useState(null),z=async()=>{a(!0);try{const{data:l}=await j.get("/api/manager/vehicles");I(l.vehicles||[]),f(l.vehicles||[])}catch{}finally{a(!1)}};d.useEffect(()=>{z()},[]),d.useEffect(()=>{let l=u;h!=="All"&&(l=l.filter(m=>m.vehicleType===h)),n&&(l=l.filter(m=>m.vehicleNumber.toLowerCase().includes(n.toLowerCase())||m.vehicleModelName?.toLowerCase().includes(n.toLowerCase())||m.driverName?.toLowerCase().includes(n.toLowerCase())||m.vehicleType.toLowerCase().includes(n.toLowerCase()))),f(l)},[u,n,h]);const M=l=>{S(l?c.map(m=>m._id):[])},v=(l,m)=>{S(m?[...D,l]:D.filter(b=>b!==l))},s=()=>{L({type:"bulkDelete",message:`Are you sure you want to delete ${D.length} selected vehicles?`,action:async()=>{try{await Promise.all(D.map(l=>j.delete(`/api/manager/vehicles/${l}`))),S([]),await z()}catch{}}}),B(!0)},t=l=>{p({...l})},r=()=>{p(null)},E=async()=>{if(i)try{await j.put(`/api/manager/vehicles/${i._id}`,{vehicleNumber:i.vehicleNumber,vehicleType:i.vehicleType,vehicleModelName:i.vehicleModelName,driverName:i.driverName,driverMobileNumber:i.driverMobileNumber}),p(null),await z()}catch{}},_=(l,m)=>{G(m),l.dataTransfer.effectAllowed="move"},R=l=>{l.preventDefault(),l.dataTransfer.dropEffect="move"},V=(l,m)=>{if(l.preventDefault(),!A||A._id===m._id)return;const b=c.findIndex(O=>O._id===A._id),P=c.findIndex(O=>O._id===m._id),$=[...c];$.splice(b,1),$.splice(P,0,A),f($),G(null)},F=({show:l,onClose:m,action:b})=>l?e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e.jsxs("div",{style:{background:"white",padding:"24px",borderRadius:"12px",maxWidth:"400px",width:"90%",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.2)"},children:[e.jsx("h3",{style:{marginBottom:"16px"},children:"Confirm Action"}),e.jsx("p",{style:{marginBottom:"24px",color:"#6b7280"},children:b?.message}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[e.jsx("button",{className:"btn secondary",onClick:m,children:"Cancel"}),e.jsx("button",{className:"btn danger",onClick:()=>{b?.action(),m()},children:"Confirm"})]})]})}):null,o=async l=>{l.preventDefault(),a(!0);try{await j.post("/api/manager/vehicles",y),x({vehicleNumber:"",vehicleType:"Bus",vehicleModelName:"",driverName:"",driverMobileNumber:""}),await z()}catch{}finally{a(!1)}},C=async l=>{const m=u.find(b=>b._id===l);L({type:"delete",message:`Are you sure you want to delete vehicle "${m?.vehicleNumber}"?`,action:async()=>{try{await j.delete(`/api/manager/vehicles/${l}`),await z()}catch{}}}),B(!0)},w=l=>{switch(l){case"Bus":return"ðŸšŒ";case"Car":return"ðŸš—";case"Ambulance":return"ðŸš‘";case"Van":return"ðŸš";case"Truck":return"ðŸš›";default:return"ðŸš—"}},U=l=>{switch(l){case"Bus":return{bg:"#dbeafe",color:"#1e40af"};case"Car":return{bg:"#d1fae5",color:"#047857"};case"Ambulance":return{bg:"#fee2e2",color:"#dc2626"};case"Van":return{bg:"#fef3c7",color:"#d97706"};case"Truck":return{bg:"#f3e8ff",color:"#7c3aed"};default:return{bg:"#f3f4f6",color:"#374151"}}};return e.jsxs("div",{children:[e.jsx(F,{show:W,onClose:()=>B(!1),action:k}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{style:{marginBottom:"24px",display:"flex",alignItems:"center",gap:"8px"},children:"ðŸšŒ Add University Vehicle"}),e.jsxs("form",{onSubmit:o,style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"Vehicle Number"}),e.jsx("input",{className:"input",value:y.vehicleNumber||"",onChange:l=>x(m=>({...m,vehicleNumber:l.target.value})),required:!0,placeholder:"e.g., UNI-001",style:{width:"100%"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"Vehicle Type"}),e.jsxs("select",{className:"input",value:y.vehicleType||"",onChange:l=>x(m=>({...m,vehicleType:l.target.value})),style:{width:"100%"},children:[e.jsx("option",{value:"Bus",children:"Bus"}),e.jsx("option",{value:"Car",children:"Car"}),e.jsx("option",{value:"Ambulance",children:"Ambulance"}),e.jsx("option",{value:"Van",children:"Van"}),e.jsx("option",{value:"Truck",children:"Truck"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"Model Name"}),e.jsx("input",{className:"input",value:y.vehicleModelName||"",onChange:l=>x(m=>({...m,vehicleModelName:l.target.value})),placeholder:"e.g., Toyota Hiace",style:{width:"100%"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"Driver Name"}),e.jsx("input",{className:"input",value:y.driverName||"",onChange:l=>x(m=>({...m,driverName:l.target.value})),placeholder:"Driver's full name",style:{width:"100%"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"Driver Mobile"}),e.jsx("input",{className:"input",value:y.driverMobileNumber||"",onChange:l=>x(m=>({...m,driverMobileNumber:l.target.value})),placeholder:"Driver's phone number",style:{width:"100%"}})]}),e.jsx("div",{style:{display:"flex",alignItems:"end"},children:e.jsx("button",{className:"btn",disabled:g,style:{width:"100%",padding:"12px"},children:g?"Adding...":"Add Vehicle"})})]})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"center",flexWrap:"wrap"},children:[e.jsx("div",{style:{flex:1,minWidth:"200px"},children:e.jsx("input",{className:"input",placeholder:"ðŸ” Search vehicles by number, model, driver, or type...",value:n,onChange:l=>T(l.target.value),style:{width:"100%"}})}),e.jsx("div",{children:e.jsxs("select",{className:"input",value:h,onChange:l=>N(l.target.value),children:[e.jsx("option",{value:"All",children:"All Types"}),e.jsx("option",{value:"Bus",children:"Bus"}),e.jsx("option",{value:"Car",children:"Car"}),e.jsx("option",{value:"Ambulance",children:"Ambulance"}),e.jsx("option",{value:"Van",children:"Van"}),e.jsx("option",{value:"Truck",children:"Truck"}),e.jsx("option",{value:"Other",children:"Other"})]})}),D.length>0&&e.jsxs("button",{className:"btn danger",onClick:s,style:{display:"flex",alignItems:"center",gap:"8px"},children:["ðŸ—‘ï¸ Delete Selected (",D.length,")"]})]})}),e.jsxs("div",{className:"card",children:[e.jsxs("h3",{style:{marginBottom:"24px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("span",{children:["ðŸšŒ University Vehicles (",c.length,")"]}),c.length>0&&e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"14px"},children:[e.jsx("input",{type:"checkbox",checked:D.length===c.length,onChange:l=>M(l.target.checked)}),"Select All"]})]}),g?e.jsxs("div",{style:{textAlign:"center",padding:"40px"},children:[e.jsx("div",{style:{fontSize:"24px",marginBottom:"8px"},children:"â³"}),"Loading vehicles..."]}):c.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#6b7280"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"ðŸšŒ"}),e.jsx("h4",{children:"No vehicles found"}),e.jsx("p",{children:"Try adjusting your search or filter criteria"})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:c.map(l=>{const m=U(l.vehicleType);return e.jsx("div",{draggable:!0,onDragStart:b=>_(b,l),onDragOver:R,onDrop:b=>V(b,l),style:{border:"1px solid #e2e8f0",borderRadius:"12px",padding:"20px",background:"white",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.05)",transition:"all 0.2s ease",cursor:A?"grabbing":"grab",opacity:A&&A._id===l._id?.5:1},onMouseEnter:b=>{A||(b.currentTarget.style.transform="translateY(-2px)",b.currentTarget.style.boxShadow="0 8px 25px rgba(0, 0, 0, 0.1)")},onMouseLeave:b=>{A||(b.currentTarget.style.transform="translateY(0)",b.currentTarget.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.05)")},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx("input",{type:"checkbox",checked:D.includes(l._id),onChange:b=>v(l._id,b.target.checked)}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #10B981 0%, #047857 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"20px"},children:w(l.vehicleType)}),e.jsx("div",{style:{flex:1},children:i&&i._id===l._id?e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px",minWidth:"300px"},children:[e.jsx("input",{className:"input",value:i.vehicleNumber,onChange:b=>p({...i,vehicleNumber:b.target.value}),placeholder:"Vehicle Number"}),e.jsxs("select",{className:"input",value:i.vehicleType,onChange:b=>p({...i,vehicleType:b.target.value}),children:[e.jsx("option",{value:"Bus",children:"Bus"}),e.jsx("option",{value:"Car",children:"Car"}),e.jsx("option",{value:"Ambulance",children:"Ambulance"}),e.jsx("option",{value:"Van",children:"Van"}),e.jsx("option",{value:"Truck",children:"Truck"}),e.jsx("option",{value:"Other",children:"Other"})]}),e.jsx("input",{className:"input",value:i.vehicleModelName||"",onChange:b=>p({...i,vehicleModelName:b.target.value}),placeholder:"Model Name"}),e.jsx("input",{className:"input",value:i.driverName||"",onChange:b=>p({...i,driverName:b.target.value}),placeholder:"Driver Name"})]}):e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[e.jsx("h4",{style:{margin:"0",fontSize:"18px",fontWeight:"600"},children:l.vehicleNumber}),e.jsx("div",{style:{background:m.bg,color:m.color,padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:"600"},children:l.vehicleType})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",fontSize:"14px",color:"#6b7280"},children:[l.vehicleModelName&&e.jsxs("div",{children:["ðŸš— Model: ",l.vehicleModelName]}),l.driverName&&e.jsxs("div",{children:["ðŸ‘¨â€âœˆï¸ Driver: ",l.driverName]}),l.driverMobileNumber&&e.jsxs("div",{children:["ðŸ“± Mobile: ",l.driverMobileNumber]})]})]})})]})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:e.jsx("div",{style:{display:"flex",gap:"8px"},children:i&&i._id===l._id?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn secondary",onClick:r,style:{fontSize:"14px",padding:"8px 12px"},children:"Cancel"}),e.jsx("button",{className:"btn",onClick:E,style:{fontSize:"14px",padding:"8px 12px"},children:"Save"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn secondary",onClick:()=>t(l),style:{fontSize:"14px",padding:"8px 12px"},children:"âœï¸ Edit"}),e.jsx("button",{className:"btn danger",onClick:()=>C(l._id),style:{fontSize:"14px",padding:"8px 12px"},children:"ðŸ—‘ï¸ Delete"})]})})})]})},l._id)})}),c.length>1&&e.jsx("div",{style:{marginTop:"16px",padding:"12px",background:"#f8fafc",borderRadius:"8px",fontSize:"14px",color:"#6b7280",textAlign:"center"},children:"ðŸ’¡ Tip: Drag and drop vehicles to reorder them"})]})]})}function Z(){const[u,I]=d.useState([]),[c,f]=d.useState(!1),y=async()=>{f(!0);try{const{data:x}=await j.get("/api/manager/personal-vehicles");I(x.vehicles||[])}catch{}finally{f(!1)}};return d.useEffect(()=>{y()},[]),e.jsx("div",{children:e.jsxs("div",{className:"card",children:[e.jsx("h3",{children:"Personal Vehicles (Registered by Users)"}),c?e.jsx("div",{children:"Loading vehicles..."}):u.length===0?e.jsx("div",{children:"No personal vehicles found"}):e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f5f5f5"},children:[e.jsx("th",{style:{padding:"8px",border:"1px solid #ddd",textAlign:"left"},children:"Vehicle Number"}),e.jsx("th",{style:{padding:"8px",border:"1px solid #ddd",textAlign:"left"},children:"Vehicle Type"}),e.jsx("th",{style:{padding:"8px",border:"1px solid #ddd",textAlign:"left"},children:"Model Name"}),e.jsx("th",{style:{padding:"8px",border:"1px solid #ddd",textAlign:"left"},children:"Owner"}),e.jsx("th",{style:{padding:"8px",border:"1px solid #ddd",textAlign:"left"},children:"Driver Name"}),e.jsx("th",{style:{padding:"8px",border:"1px solid #ddd",textAlign:"left"},children:"Driver Mobile"}),e.jsx("th",{style:{padding:"8px",border:"1px solid #ddd",textAlign:"left"},children:"Employee Number"})]})}),e.jsx("tbody",{children:u.map(x=>e.jsxs("tr",{style:{borderBottom:"1px solid #ddd"},children:[e.jsx("td",{style:{padding:"8px",border:"1px solid #ddd"},children:e.jsx("strong",{children:x.vehicleNumber})}),e.jsx("td",{style:{padding:"8px",border:"1px solid #ddd"},children:x.vehicleType}),e.jsx("td",{style:{padding:"8px",border:"1px solid #ddd"},children:x.vehicleModelName||"N/A"}),e.jsx("td",{style:{padding:"8px",border:"1px solid #ddd"},children:x.vehicleOwner}),e.jsx("td",{style:{padding:"8px",border:"1px solid #ddd"},children:x.driverName||"N/A"}),e.jsx("td",{style:{padding:"8px",border:"1px solid #ddd"},children:x.driverMobileNumber||"N/A"}),e.jsx("td",{style:{padding:"8px",border:"1px solid #ddd"},children:x.empNumber})]},x._id))})]})})]})})}function ee(){const[u,I]=d.useState([]),[c,f]=d.useState({title:"",description:"",date:""}),[y,x]=d.useState(!1),i=async()=>{x(!0);try{const{data:a}=await j.get("/api/manager/announcements");I(a.announcements||[])}catch{}finally{x(!1)}};d.useEffect(()=>{i()},[]);const p=async a=>{a.preventDefault(),x(!0);try{await j.post("/api/manager/announcements",c),f({title:"",description:"",date:""}),await i()}catch{}finally{x(!1)}},g=async a=>{if(confirm("Are you sure you want to delete this announcement?"))try{await j.delete(`/api/manager/announcements/${a}`),await i()}catch{}};return e.jsxs("div",{children:[e.jsxs("div",{className:"card",children:[e.jsx("h3",{children:"Add Announcement"}),e.jsxs("form",{onSubmit:p,className:"row",children:[e.jsxs("div",{className:"col",children:[e.jsx("label",{children:"Title"}),e.jsx("input",{className:"input",value:c.title||"",onChange:a=>f(n=>({...n,title:a.target.value})),required:!0})]}),e.jsxs("div",{className:"col",children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{className:"input",value:c.description||"",onChange:a=>f(n=>({...n,description:a.target.value})),required:!0,style:{minHeight:"60px"}})]}),e.jsxs("div",{className:"col",children:[e.jsx("label",{children:"Date"}),e.jsx("input",{type:"date",className:"input",value:c.date||"",onChange:a=>f(n=>({...n,date:a.target.value}))})]}),e.jsx("div",{className:"col",children:e.jsx("button",{className:"btn",disabled:y,children:y?"Publishing...":"Publish"})})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{children:"Announcements"}),y?e.jsx("div",{children:"Loading announcements..."}):u.length===0?e.jsx("div",{children:"No announcements found"}):e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f5f5f5"},children:[e.jsx("th",{style:{padding:"8px",border:"1px solid #ddd",textAlign:"left"},children:"Title"}),e.jsx("th",{style:{padding:"8px",border:"1px solid #ddd",textAlign:"left"},children:"Description"}),e.jsx("th",{style:{padding:"8px",border:"1px solid #ddd",textAlign:"left"},children:"Date"}),e.jsx("th",{style:{padding:"8px",border:"1px solid #ddd",textAlign:"left"},children:"Created"}),e.jsx("th",{style:{padding:"8px",border:"1px solid #ddd",textAlign:"left"},children:"Actions"})]})}),e.jsx("tbody",{children:u.map(a=>e.jsxs("tr",{style:{borderBottom:"1px solid #ddd"},children:[e.jsx("td",{style:{padding:"8px",border:"1px solid #ddd"},children:e.jsx("strong",{children:a.title})}),e.jsx("td",{style:{padding:"8px",border:"1px solid #ddd"},children:a.description}),e.jsx("td",{style:{padding:"8px",border:"1px solid #ddd"},children:a.date?new Date(a.date).toLocaleDateString("en-GB"):"N/A"}),e.jsx("td",{style:{padding:"8px",border:"1px solid #ddd"},children:a.createdAt?new Date(a.createdAt).toLocaleString():"N/A"}),e.jsx("td",{style:{padding:"8px",border:"1px solid #ddd"},children:e.jsx("button",{className:"btn danger",onClick:()=>g(a._id),children:"Delete"})})]},a._id))})]})})]})]})}function te(){const[u,I]=d.useState([]),[c,f]=d.useState([]),[y,x]=d.useState([]),[i,p]=d.useState({firstName:"",middleName:"",lastName:"",empNumber:"",email:"",password:"StrongPass@123",contactNumber:"",securityGuardId:"",assignedGates:[]}),[g,a]=d.useState(!1),[n,T]=d.useState(""),[h,N]=d.useState([]),[D,S]=d.useState(!1),[W,B]=d.useState(null),k=async()=>{a(!0);try{const t=await j.get("/api/manager/security-guards");I(t.data.guards||[]),f(t.data.guards||[]);const r=await j.get("/api/manager/gates");x(r.data.gates||[])}catch{}finally{a(!1)}};d.useEffect(()=>{k()},[]),d.useEffect(()=>{let t=u;n&&(t=t.filter(r=>r.firstName.toLowerCase().includes(n.toLowerCase())||r.lastName.toLowerCase().includes(n.toLowerCase())||r.email.toLowerCase().includes(n.toLowerCase())||r.empNumber.toLowerCase().includes(n.toLowerCase())||r.securityGuardId.toLowerCase().includes(n.toLowerCase()))),f(t)},[u,n]);const L=t=>{N(t?c.map(r=>r._id):[])},A=(t,r)=>{N(r?[...h,t]:h.filter(E=>E!==t))},G=()=>{B({type:"bulkDelete",message:`Are you sure you want to delete ${h.length} selected security guards?`,action:async()=>{try{await Promise.all(h.map(t=>j.delete(`/api/manager/security-guards/${t}`))),N([]),await k()}catch{}}}),S(!0)},z=({show:t,onClose:r,action:E})=>t?e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e.jsxs("div",{style:{background:"white",padding:"24px",borderRadius:"12px",maxWidth:"400px",width:"90%",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.2)"},children:[e.jsx("h3",{style:{marginBottom:"16px"},children:"Confirm Action"}),e.jsx("p",{style:{marginBottom:"24px",color:"#6b7280"},children:E?.message}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[e.jsx("button",{className:"btn secondary",onClick:r,children:"Cancel"}),e.jsx("button",{className:"btn danger",onClick:()=>{E?.action(),r()},children:"Confirm"})]})]})}):null,M=t=>p(r=>({...r,assignedGates:r.assignedGates.includes(t)?r.assignedGates.filter(E=>E!==t):[...r.assignedGates,t]})),v=async t=>{t.preventDefault(),a(!0);try{await j.post("/api/manager/security-guards",i),p({firstName:"",middleName:"",lastName:"",empNumber:"",email:"",password:"StrongPass@123",contactNumber:"",securityGuardId:"",assignedGates:[]}),await k()}catch{}finally{a(!1)}},s=async t=>{const r=u.find(E=>E._id===t);B({type:"delete",message:`Are you sure you want to delete ${r?.firstName} ${r?.lastName}?`,action:async()=>{try{await j.delete(`/api/manager/security-guards/${t}`),await k()}catch{}}}),S(!0)};return e.jsxs("div",{children:[e.jsx(z,{show:D,onClose:()=>S(!1),action:W}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{style:{marginBottom:"24px",display:"flex",alignItems:"center",gap:"8px"},children:"ðŸ›¡ï¸ Create New Security Guard"}),e.jsxs("form",{onSubmit:v,style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"First Name"}),e.jsx("input",{className:"input",value:i.firstName||"",onChange:t=>p(r=>({...r,firstName:t.target.value})),required:!0,style:{width:"100%"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"Middle Name"}),e.jsx("input",{className:"input",value:i.middleName||"",onChange:t=>p(r=>({...r,middleName:t.target.value})),style:{width:"100%"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"Last Name"}),e.jsx("input",{className:"input",value:i.lastName||"",onChange:t=>p(r=>({...r,lastName:t.target.value})),required:!0,style:{width:"100%"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"Employee Number"}),e.jsx("input",{className:"input",value:i.empNumber||"",onChange:t=>p(r=>({...r,empNumber:t.target.value})),required:!0,style:{width:"100%"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"Email"}),e.jsx("input",{type:"email",className:"input",value:i.email||"",onChange:t=>p(r=>({...r,email:t.target.value})),required:!0,style:{width:"100%"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"Password"}),e.jsx("input",{type:"password",className:"input",value:i.password||"",onChange:t=>p(r=>({...r,password:t.target.value})),required:!0,style:{width:"100%"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"Contact Number"}),e.jsx("input",{className:"input",value:i.contactNumber||"",onChange:t=>p(r=>({...r,contactNumber:t.target.value})),style:{width:"100%"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"Security Guard ID"}),e.jsx("input",{className:"input",value:i.securityGuardId||"",onChange:t=>p(r=>({...r,securityGuardId:t.target.value})),required:!0,style:{width:"100%"}})]}),e.jsxs("div",{style:{gridColumn:"1 / -1"},children:[e.jsx("label",{style:{display:"block",marginBottom:"12px",fontWeight:"500"},children:"Assign Gates"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px"},children:y.map(t=>e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px",border:"1px solid #e2e8f0",borderRadius:"8px",cursor:"pointer",background:i.assignedGates.includes(t._id)?"#f0f9ff":"white"},children:[e.jsx("input",{type:"checkbox",checked:i.assignedGates.includes(t._id),onChange:()=>M(t._id)}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"500"},children:t.gateName}),e.jsxs("div",{style:{fontSize:"12px",color:"#6b7280"},children:["Gate ",t.gateNumber]})]})]},t._id))})]}),e.jsx("div",{style:{display:"flex",alignItems:"end"},children:e.jsx("button",{className:"btn",disabled:g,style:{width:"100%",padding:"12px"},children:g?"Creating...":"Create Security Guard"})})]})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"center",flexWrap:"wrap"},children:[e.jsx("div",{style:{flex:1,minWidth:"200px"},children:e.jsx("input",{className:"input",placeholder:"ðŸ” Search guards by name, email, employee number, or guard ID...",value:n,onChange:t=>T(t.target.value),style:{width:"100%"}})}),h.length>0&&e.jsxs("button",{className:"btn danger",onClick:G,style:{display:"flex",alignItems:"center",gap:"8px"},children:["ðŸ—‘ï¸ Delete Selected (",h.length,")"]})]})}),e.jsxs("div",{className:"card",children:[e.jsxs("h3",{style:{marginBottom:"24px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("span",{children:["ðŸ›¡ï¸ Security Guards Directory (",c.length,")"]}),c.length>0&&e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"14px"},children:[e.jsx("input",{type:"checkbox",checked:h.length===c.length,onChange:t=>L(t.target.checked)}),"Select All"]})]}),g?e.jsxs("div",{style:{textAlign:"center",padding:"40px"},children:[e.jsx("div",{style:{fontSize:"24px",marginBottom:"8px"},children:"â³"}),"Loading security guards..."]}):c.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"40px",color:"#6b7280"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"ðŸ›¡ï¸"}),e.jsx("h4",{children:"No security guards found"}),e.jsx("p",{children:"Try adjusting your search criteria"})]}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(400px, 1fr))",gap:"20px"},children:c.map(t=>e.jsxs("div",{style:{border:"1px solid #e2e8f0",borderRadius:"12px",padding:"20px",background:"white",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.05)",transition:"all 0.2s ease"},onMouseEnter:r=>{r.currentTarget.style.transform="translateY(-2px)",r.currentTarget.style.boxShadow="0 8px 25px rgba(0, 0, 0, 0.1)"},onMouseLeave:r=>{r.currentTarget.style.transform="translateY(0)",r.currentTarget.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.05)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"start",justifyContent:"space-between",marginBottom:"16px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("input",{type:"checkbox",checked:h.includes(t._id),onChange:r=>A(t._id,r.target.checked)}),e.jsxs("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:"linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"20px",fontWeight:"600"},children:[t.firstName.charAt(0),t.lastName.charAt(0)]})]}),e.jsx("div",{style:{background:"#f3e8ff",color:"#7c3aed",padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:"600"},children:"Security Guard"})]}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs("h4",{style:{margin:"0 0 4px 0",fontSize:"18px",fontWeight:"600"},children:[t.firstName," ",t.middleName?t.middleName+" ":"",t.lastName]}),e.jsxs("p",{style:{margin:"0",color:"#6b7280",fontSize:"14px"},children:["Guard ID: ",t.securityGuardId," â€¢ Employee #",t.empNumber]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginBottom:"16px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"14px"},children:[e.jsx("span",{children:"ðŸ“§"}),e.jsx("span",{style:{color:"#6b7280"},children:t.email})]}),t.contactNumber&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"14px"},children:[e.jsx("span",{children:"ðŸ“±"}),e.jsx("span",{style:{color:"#6b7280"},children:t.contactNumber})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"14px"},children:[e.jsx("span",{children:"ðŸšª"}),e.jsx("span",{style:{color:"#6b7280"},children:t.assignedGates&&t.assignedGates.length>0?t.assignedGates.map(r=>r.gateName).join(", "):"No gates assigned"})]}),t.createdAt&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"14px"},children:[e.jsx("span",{children:"ðŸ“…"}),e.jsxs("span",{style:{color:"#6b7280"},children:["Joined ",new Date(t.createdAt).toLocaleDateString()]})]})]}),e.jsx("div",{style:{display:"flex",gap:"8px"},children:e.jsx("button",{className:"btn danger",onClick:()=>s(t._id),style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",fontSize:"14px"},children:"ðŸ—‘ï¸ Delete"})})]},t._id))})]})]})}function se(){const[u,I]=d.useState([]),[c,f]=d.useState({vehicleNumber:"",ownerName:"",gate:"",securityGuardId:"",entryTime:"",exitTime:"",vehicleType:""}),[y,x]=d.useState(!1),i=async()=>{x(!0);try{const a=new URLSearchParams;Object.entries(c).forEach(([T,h])=>{h&&a.set(T,h)});const{data:n}=await j.get(`/api/manager/logs?${a.toString()}`);I(n.logs||[])}catch{}finally{x(!1)}};d.useEffect(()=>{i()},[]);const p=async a=>{a.preventDefault(),i()},g=async a=>{try{const n=new URLSearchParams;Object.entries(c).forEach(([D,S])=>{S&&n.set(D,S)}),n.set("export",a);const T=await j.get(`/api/manager/logs?${n.toString()}`,{responseType:"blob"}),h=window.URL.createObjectURL(new Blob([T.data])),N=document.createElement("a");N.href=h,N.setAttribute("download",`logs.${a}`),document.body.appendChild(N),N.click(),N.remove(),window.URL.revokeObjectURL(h)}catch{alert(`Failed to export ${a.toUpperCase()}. Please try again.`)}};return e.jsxs("div",{children:[e.jsxs("div",{className:"card",children:[e.jsx("h3",{children:"Filters"}),e.jsxs("form",{onSubmit:p,className:"row",children:[e.jsxs("div",{className:"col",children:[e.jsx("label",{children:"Vehicle Number"}),e.jsx("input",{className:"input",value:c.vehicleNumber||"",onChange:a=>f(n=>({...n,vehicleNumber:a.target.value}))})]}),e.jsxs("div",{className:"col",children:[e.jsx("label",{children:"Owner Name"}),e.jsx("input",{className:"input",value:c.ownerName||"",onChange:a=>f(n=>({...n,ownerName:a.target.value}))})]}),e.jsxs("div",{className:"col",children:[e.jsx("label",{children:"Gate"}),e.jsx("input",{className:"input",value:c.gate||"",onChange:a=>f(n=>({...n,gate:a.target.value}))})]}),e.jsxs("div",{className:"col",children:[e.jsx("label",{children:"Security Guard ID"}),e.jsx("input",{className:"input",value:c.securityGuardId||"",onChange:a=>f(n=>({...n,securityGuardId:a.target.value}))})]}),e.jsxs("div",{className:"col",children:[e.jsx("label",{children:"Entry Time (Date)"}),e.jsx("input",{type:"date",className:"input",value:c.entryTime||"",onChange:a=>f(n=>({...n,entryTime:a.target.value}))})]}),e.jsxs("div",{className:"col",children:[e.jsx("label",{children:"Exit Time (Date)"}),e.jsx("input",{type:"date",className:"input",value:c.exitTime||"",onChange:a=>f(n=>({...n,exitTime:a.target.value}))})]}),e.jsxs("div",{className:"col",children:[e.jsx("label",{children:"Vehicle Type"}),e.jsxs("select",{className:"input",value:c.vehicleType||"",onChange:a=>f(n=>({...n,vehicleType:a.target.value})),children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"Car",children:"Car"}),e.jsx("option",{value:"Bike",children:"Bike"}),e.jsx("option",{value:"Scooter",children:"Scooter"}),e.jsx("option",{value:"Bus",children:"Bus"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsx("div",{className:"col",children:e.jsx("button",{className:"btn",disabled:y,children:y?"Loading...":"Apply"})}),e.jsxs("div",{className:"col",style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx("button",{type:"button",className:"btn secondary",onClick:()=>g("csv"),children:"Export CSV"}),e.jsx("button",{type:"button",className:"btn secondary",onClick:()=>g("pdf"),children:"Export PDF"})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{children:"Vehicle Movement Logs"}),y?e.jsx("div",{children:"Loading logs..."}):u.length===0?e.jsx("div",{children:"No logs found"}):e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f5f5f5"},children:[e.jsx("th",{style:{padding:"8px",border:"1px solid #ddd",textAlign:"left"},children:"Log ID"}),e.jsx("th",{style:{padding:"8px",border:"1px solid #ddd",textAlign:"left"},children:"Vehicle Number"}),e.jsx("th",{style:{padding:"8px",border:"1px solid #ddd",textAlign:"left"},children:"Vehicle Type"}),e.jsx("th",{style:{padding:"8px",border:"1px solid #ddd",textAlign:"left"},children:"Owner"}),e.jsx("th",{style:{padding:"8px",border:"1px solid #ddd",textAlign:"left"},children:"Gate"}),e.jsx("th",{style:{padding:"8px",border:"1px solid #ddd",textAlign:"left"},children:"Security Guard"}),e.jsx("th",{style:{padding:"8px",border:"1px solid #ddd",textAlign:"left"},children:"Entry Time"}),e.jsx("th",{style:{padding:"8px",border:"1px solid #ddd",textAlign:"left"},children:"Exit Time"}),e.jsx("th",{style:{padding:"8px",border:"1px solid #ddd",textAlign:"left"},children:"Duration"})]})}),e.jsx("tbody",{children:u.map(a=>{const n=a.timeIn?new Date(a.timeIn):null,T=a.timeOut?new Date(a.timeOut):null,h=n&&T?Math.round((T-n)/(1e3*60))+" min":"-";return e.jsxs("tr",{style:{borderBottom:"1px solid #ddd"},children:[e.jsx("td",{style:{padding:"8px",border:"1px solid #ddd"},children:a.logId||a._id.slice(-8)}),e.jsx("td",{style:{padding:"8px",border:"1px solid #ddd"},children:e.jsx("strong",{children:a.vehicleNumber})}),e.jsx("td",{style:{padding:"8px",border:"1px solid #ddd"},children:a.vehicleType||"N/A"}),e.jsx("td",{style:{padding:"8px",border:"1px solid #ddd"},children:a.vehicleOwner||"N/A"}),e.jsx("td",{style:{padding:"8px",border:"1px solid #ddd"},children:a.gateNumber}),e.jsx("td",{style:{padding:"8px",border:"1px solid #ddd"},children:a.securityGuardName||a.securityGuardId||"N/A"}),e.jsx("td",{style:{padding:"8px",border:"1px solid #ddd"},children:n?n.toLocaleString():"-"}),e.jsx("td",{style:{padding:"8px",border:"1px solid #ddd"},children:T?T.toLocaleString():"-"}),e.jsx("td",{style:{padding:"8px",border:"1px solid #ddd"},children:h})]},a._id)})})]})})]})]})}export{H as M,J as a,K as b,Q as c,Z as d,ee as e,te as f,se as g};
